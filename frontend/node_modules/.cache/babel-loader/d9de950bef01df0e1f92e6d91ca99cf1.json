{"ast":null,"code":"var _jsxFileName = \"/Users/krunal/Desktop/Crio project/Fullstack/Flix-cart/Frontend/src/components/Checkout.js\";\nimport { Button, message, Radio, Row, Col } from \"antd\";\nimport TextArea from \"antd/lib/input/TextArea\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { config } from \"../App\";\nimport Cart from \"./Cart\";\nimport \"./Checkout.css\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nconst Checkout = () => {\n  const cartRef = useRef();\n  const history = useHistory();\n  const [products, setProducts] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [newAddress, setNewAddress] = useState(\"\");\n  const [balance, setBalance] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const validateGetProductsResponse = (errored, response) => {\n    if (errored || !response.length && !response.message) {\n      message.error(\"Could not fetch products. Check that the backend is running, reachable and returns valid JSON.\");\n      return false;\n    }\n    if (!response.length) {\n      message.error(response.message || \"No products found in database\");\n      return false;\n    }\n    return true;\n  };\n  const getProducts = async () => {\n    let response = {};\n    let errored = false;\n    setLoading(true);\n    try {\n      response = await (await fetch(`${config.endpoint}/products`)).json();\n    } catch (e) {\n      errored = true;\n    }\n    if (validateGetProductsResponse(errored, response)) {\n      console.log(\"validation true\", {\n        response\n      });\n      if (response) {\n        setProducts(response);\n      }\n    }\n    setLoading(false);\n  };\n  const validateResponse = (errored, response, couldNot) => {\n    if (errored) {\n      message.error(`Could not ${couldNot}. Check that the backend is running, reachable and returns valid JSON.`);\n      return false;\n    }\n    if (response.message) {\n      message.error(response.message);\n      return false;\n    }\n    return true;\n  };\n  const getAddresses = async () => {\n    let response = {};\n    let errored = false;\n    setLoading(true);\n    try {\n      response = await (await fetch(`${config.endpoint}/users/${localStorage.getItem(\"userId\")}?q=address`, {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      })).json();\n    } catch (e) {\n      errored = true;\n    }\n    setLoading(false);\n    if (validateResponse(errored, response, \"fetch addresses\")) {\n      if (response) {\n        setAddress(response.address !== \"ADDRESS_NOT_SET\" ? response.address : \"\");\n      }\n    }\n  };\n  const addAddress = async () => {\n    let response = {};\n    let errored = false;\n    setLoading(true);\n    try {\n      response = await (await fetch(`${config.endpoint}/users/${localStorage.getItem(\"userId\")}?q=address`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          address: newAddress\n        })\n      })).json();\n    } catch (e) {\n      errored = true;\n    }\n    setLoading(false);\n    if (validateResponse(errored, response, \"add a new address\")) {\n      if (response) {\n        message.success(\"Address added\");\n        setNewAddress(\"\");\n        await getAddresses();\n      }\n    }\n  };\n  const deleteAddress = async addressId => {\n    let response = {};\n    let errored = false;\n    setLoading(true);\n    try {\n      response = await (await fetch(`${config.endpoint}/user/addresses/${addressId}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      })).json();\n    } catch (e) {\n      errored = true;\n    }\n    setLoading(false);\n    if (validateResponse(errored, response, \"delete address\")) {\n      if (response) {\n        message.success(\"Address deleted\");\n        await getAddresses();\n      }\n    }\n  };\n  const checkout = async () => {\n    let response = {};\n    let errored = false;\n    setLoading(true);\n    try {\n      response = await fetch(`${config.endpoint}/cart/checkout`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n    } catch (e) {\n      errored = true;\n      console.log(e);\n    }\n    setLoading(false);\n    let data;\n    if (response.status !== 204) {\n      data = await response.json();\n    }\n    if (response.status === 204 || validateResponse(errored, data)) {\n      message.success(\"Order placed\");\n      localStorage.setItem(\"balance\", parseInt(localStorage.getItem(\"balance\")) - cartRef.current.calculateTotal());\n      history.push(\"/thanks\");\n    }\n  };\n  useEffect(() => {\n    const initialize = async () => {\n      if (localStorage.getItem(\"username\") && localStorage.getItem(\"token\")) {\n        await getProducts();\n        await getAddresses();\n        setBalance(localStorage.getItem(\"balance\"));\n      } else {\n        message.error(\"You must be logged in to visit the checkout page\");\n        history.push(\"/\");\n      }\n    };\n    initialize();\n  }, [history]);\n  const radioStyle = {\n    display: \"block\",\n    height: \"30px\",\n    lineHeight: \"30px\"\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    history: history,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: {\n      span: 24,\n      order: 2\n    },\n    xl: {\n      span: 18,\n      order: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-shipping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      marginBottom: \"-10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"address-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 15\n    }\n  }, address.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"address-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"address-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 21\n    }\n  }, address), /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    onClick: async () => {\n      await deleteAddress(address._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 21\n    }\n  }, \"Delete\")) :\n  /*#__PURE__*/\n  // Display static text banner if no addresses are added\n  React.createElement(\"div\", {\n    className: \"red-text checkout-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 19\n    }\n  }, \"No addresses found. Please add one to proceed.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TextArea, {\n    className: \"new-address\",\n    placeholder: address ? \"Update Address\" : \"Add new address\",\n    rows: 4,\n    value: newAddress,\n    onChange: e => setNewAddress(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    onClick: addAddress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 21\n    }\n  }, address ? \"Update Address\" : \"Add new address\")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      marginBottom: \"-10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 17\n    }\n  }, \"Pricing\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 17\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(Radio.Group, {\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    style: radioStyle,\n    value: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 19\n    }\n  }, \"Wallet\", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 21\n    }\n  }, \" (\\u20B9\", balance, \" available)\")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"ant-btn-success\",\n    loading: loading,\n    type: \"primary\",\n    onClick: checkout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 15\n    }\n  }, \"PLACE ORDER\"))), products.length && /*#__PURE__*/React.createElement(Col, {\n    xs: {\n      span: 24,\n      order: 1\n    },\n    xl: {\n      span: 6,\n      order: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 30\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Cart, {\n    ref: cartRef,\n    isReadOnly: true,\n    products: products,\n    token: localStorage.getItem(\"token\"),\n    checkout: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 15\n    }\n  }))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }\n  }));\n};\nexport default Checkout;","map":{"version":3,"names":["Button","message","Radio","Row","Col","TextArea","React","useState","useEffect","useRef","useHistory","config","Cart","Footer","Header","Checkout","cartRef","history","products","setProducts","address","setAddress","newAddress","setNewAddress","balance","setBalance","loading","setLoading","validateGetProductsResponse","errored","response","length","error","getProducts","fetch","endpoint","json","e","console","log","validateResponse","couldNot","getAddresses","localStorage","getItem","method","headers","Authorization","addAddress","body","JSON","stringify","success","deleteAddress","addressId","checkout","data","status","setItem","parseInt","current","calculateTotal","push","initialize","radioStyle","display","height","lineHeight","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","xs","span","order","xl","style","marginBottom","type","onClick","_id","placeholder","rows","value","onChange","target","Group","ref","isReadOnly","token"],"sources":["/Users/krunal/Desktop/Crio project/Fullstack/Flix-cart/Frontend/src/components/Checkout.js"],"sourcesContent":["import { Button, message, Radio, Row, Col } from \"antd\";\nimport TextArea from \"antd/lib/input/TextArea\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { config } from \"../App\";\nimport Cart from \"./Cart\";\nimport \"./Checkout.css\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\n\nconst Checkout = () => {\n  const cartRef = useRef();\n  const history = useHistory();\n\n  const [products, setProducts] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [newAddress, setNewAddress] = useState(\"\");\n  const [balance, setBalance] = useState(0);\n  const [loading, setLoading] = useState(false);\n\n  const validateGetProductsResponse = (errored, response) => {\n    if (errored || (!response.length && !response.message)) {\n      message.error(\n        \"Could not fetch products. Check that the backend is running, reachable and returns valid JSON.\"\n      );\n      return false;\n    }\n\n    if (!response.length) {\n      message.error(response.message || \"No products found in database\");\n      return false;\n    }\n\n    return true;\n  };\n\n  const getProducts = async () => {\n    let response = {};\n    let errored = false;\n\n    setLoading(true);\n\n    try {\n      response = await (await fetch(`${config.endpoint}/products`)).json();\n    } catch (e) {\n      errored = true;\n    }\n\n    \n    if (validateGetProductsResponse(errored, response)) {\n      console.log(\"validation true\", {response})\n      if (response) {\n        setProducts(response);\n      }\n    }\n    setLoading(false);\n  };\n\n  const validateResponse = (errored, response, couldNot) => {\n    if (errored) {\n      message.error(\n        `Could not ${couldNot}. Check that the backend is running, reachable and returns valid JSON.`\n      );\n      return false;\n    }\n    if (response.message) {\n      message.error(response.message);\n      return false;\n    }\n    return true;\n  };\n\n  const getAddresses = async () => {\n    let response = {};\n    let errored = false;\n\n    setLoading(true);\n\n    try {\n      response = await (\n        await fetch(\n          `${config.endpoint}/users/${localStorage.getItem(\n            \"userId\"\n          )}?q=address`,\n          {\n            method: \"GET\",\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n            },\n          }\n        )\n      ).json();\n    } catch (e) {\n      errored = true;\n    }\n\n    setLoading(false);\n\n    if (validateResponse(errored, response, \"fetch addresses\")) {\n      if (response) {\n        setAddress(\n          response.address !== \"ADDRESS_NOT_SET\" ? response.address : \"\"\n        );\n      }\n    }\n  };\n\n  const addAddress = async () => {\n    let response = {};\n    let errored = false;\n\n    setLoading(true);\n\n    try {\n      response = await (\n        await fetch(\n          `${config.endpoint}/users/${localStorage.getItem(\n            \"userId\"\n          )}?q=address`,\n          {\n            method: \"PUT\",\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              address: newAddress,\n            }),\n          }\n        )\n      ).json();\n    } catch (e) {\n      errored = true;\n    }\n\n    setLoading(false);\n\n    if (validateResponse(errored, response, \"add a new address\")) {\n      if (response) {\n        message.success(\"Address added\");\n\n        setNewAddress(\"\");\n\n        await getAddresses();\n      }\n    }\n  };\n\n  const deleteAddress = async (addressId) => {\n    let response = {};\n    let errored = false;\n\n    setLoading(true);\n\n    try {\n      response = await (\n        await fetch(`${config.endpoint}/user/addresses/${addressId}`, {\n          method: \"DELETE\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n        })\n      ).json();\n    } catch (e) {\n      errored = true;\n    }\n\n    setLoading(false);\n\n    if (validateResponse(errored, response, \"delete address\")) {\n      if (response) {\n        message.success(\"Address deleted\");\n\n        await getAddresses();\n      }\n    }\n  };\n\n  const checkout = async () => {\n    let response = {};\n    let errored = false;\n\n    setLoading(true);\n\n    try {\n      response = await fetch(`${config.endpoint}/cart/checkout`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n    } catch (e) {\n      errored = true;\n      console.log(e);\n    }\n\n    setLoading(false);\n\n    let data;\n    if (response.status !== 204) {\n      data = await response.json();\n    }\n    if (response.status === 204 || validateResponse(errored, data)) {\n      message.success(\"Order placed\");\n\n      localStorage.setItem(\n        \"balance\",\n        parseInt(localStorage.getItem(\"balance\")) -\n          cartRef.current.calculateTotal()\n      );\n\n      history.push(\"/thanks\");\n    }\n  };\n\n  useEffect(() => {\n    const initialize = async () => {\n      if (localStorage.getItem(\"username\") && localStorage.getItem(\"token\")) {\n        await getProducts();\n        await getAddresses();\n\n        setBalance(localStorage.getItem(\"balance\"));\n      } else {\n        message.error(\"You must be logged in to visit the checkout page\");\n        history.push(\"/\");\n      }\n    };\n\n    initialize();\n  }, [history]);\n\n  const radioStyle = {\n    display: \"block\",\n    height: \"30px\",\n    lineHeight: \"30px\",\n  };\n\n  return (\n    <>\n      {/* Display Header */}\n      <Header history={history} />\n\n      {/* Display Checkout page content */}\n      <div className=\"checkout-container\">\n        <Row>\n          {/* Display checkout instructions */}\n          <Col xs={{ span: 24, order: 2 }} xl={{ span: 18, order: 1 }}>\n            <div className=\"checkout-shipping\">\n              <h1 style={{ marginBottom: \"-10px\" }}>Shipping</h1>\n\n              <hr />\n              <br />\n\n              <p>Shipping Address</p>\n\n              {/* Display the \"Shipping\" section */}\n              <div className=\"address-section\">\n                {address.length ? (\n                  <div className=\"address-box\">\n                    {/* Display address title */}\n                    <div className=\"address-text\">{address}</div>\n\n                    {/* Display button to delete address from user's list */}\n                    <Button\n                      type=\"primary\"\n                      onClick={async () => {\n                        await deleteAddress(address._id);\n                      }}\n                    >\n                      Delete\n                    </Button>\n                  </div>\n                ) : (\n                  // Display static text banner if no addresses are added\n                  <div className=\"red-text checkout-row\">\n                    No addresses found. Please add one to proceed.\n                  </div>\n                )}\n\n                <div className=\"checkout-row\">\n                  {/* Text input field to type a new address */}\n                  <div>\n                    <TextArea\n                      className=\"new-address\"\n                      placeholder={\n                        address ? \"Update Address\" : \"Add new address\"\n                      }\n                      rows={4}\n                      value={newAddress}\n                      onChange={(e) => setNewAddress(e.target.value)}\n                    />\n                  </div>\n\n                  {/* Button to submit address added */}\n                  <div>\n                    <Button type=\"primary\" onClick={addAddress}>\n                      {address ? \"Update Address\" : \"Add new address\"}\n                    </Button>\n                  </div>\n                </div>\n              </div>\n\n              <br />\n\n              {/* Display the \"Pricing\" section */}\n              <div>\n                <h1 style={{ marginBottom: \"-10px\" }}>Pricing</h1>\n\n                <hr />\n\n                <h2>Payment Method</h2>\n\n                <Radio.Group value={1}>\n                  <Radio style={radioStyle} value={1}>\n                    Wallet\n                    <strong> (₹{balance} available)</strong>\n                  </Radio>\n                </Radio.Group>\n              </div>\n\n              <br />\n\n              {/* Button to confirm order */}\n              <Button\n                className=\"ant-btn-success\"\n                loading={loading}\n                type=\"primary\"\n                onClick={checkout}\n              >\n                PLACE ORDER\n              </Button>\n            </div>\n          </Col>\n\n          {/* Display cart */}\n         {products.length && <Col xs={{ span: 24, order: 1 }} xl={{ span: 6, order: 2 }}>\n            <div className=\"checkout-cart\">\n              <Cart\n                ref={cartRef}\n                isReadOnly\n                products={products}\n                token={localStorage.getItem(\"token\")}\n                checkout\n              />\n            </div>\n          </Col>}\n        </Row>\n      </div>\n\n      {/* Display Footer */}\n      <Footer />\n    </>\n  );\n};\n\nexport default Checkout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}
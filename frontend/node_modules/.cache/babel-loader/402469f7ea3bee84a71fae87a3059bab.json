{"ast":null,"code":"import{LockOutlined,UserOutlined,MailOutlined}from\"@ant-design/icons\";import{Button,Input,message}from\"antd\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{config}from\"../App\";import Footer from\"./Footer\";import Header from\"./Header\";const Register=()=>{const history=useHistory();const[loading,setLoading]=useState(false);const[username,setUsername]=useState(\"\");const[phoneNumber,setPhoneNumber]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const validateInput=()=>{if(!username){message.error(\"Username is a required field\");return false;}if(username.length<6){message.error(\"Username must be at least 6 characters\");return false;}if(username.length>32){message.error(\"Username must be at most 32 characters\");return false;}if(!password){message.error(\"Password is a required field\");return false;}if(password.length<6){message.error(\"Password must be at least 8 characters\");return false;}if(password.length>32){message.error(\"Password must be at most 32 characters\");return false;}if(password!==confirmPassword){message.error(\"Passwords do not match\");return false;}return true;};const validateResponse=(errored,response)=>{if(errored||!response.tokens&&!response.message){message.error(\"Something went wrong. Check that the backend is running, reachable and returns valid JSON.\");return false;}if(!response.tokens){message.error(response.message);return false;}return true;};const performAPICall=async()=>{let response={};let errored=false;setLoading(true);try{response=await(await fetch(\"\".concat(config.endpoint,\"/auth/register\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:username,phone:phoneNumber,email,password})})).json();}catch(e){errored=true;}setLoading(false);if(validateResponse(errored,response)){return response;}};const register=async()=>{if(validateInput()){const response=await performAPICall();if(response){setUsername(\"\");setPassword(\"\");setConfirmPassword(\"\");message.success(\"Registered successfully\");history.push(\"/login\");}}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,{history:history}),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"register-container container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Make an account\"),/*#__PURE__*/React.createElement(Input,{className:\"input-field\",prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/React.createElement(Input,{className:\"input-field\",prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Mobile Number\",value:phoneNumber,onChange:e=>setPhoneNumber(e.target.value)}),/*#__PURE__*/React.createElement(Input,{className:\"input-field\",prefix:/*#__PURE__*/React.createElement(MailOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/React.createElement(Input.Password,{className:\"input-field\",prefix:/*#__PURE__*/React.createElement(LockOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/React.createElement(Input.Password,{className:\"input-field\",prefix:/*#__PURE__*/React.createElement(LockOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Confirm Password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value)}),/*#__PURE__*/React.createElement(Button,{loading:loading,type:\"primary\",onClick:register},\"Register\"))),/*#__PURE__*/React.createElement(Footer,null));};export default Register;","map":{"version":3,"names":["LockOutlined","UserOutlined","MailOutlined","Button","Input","message","React","useState","useHistory","config","Footer","Header","Register","history","loading","setLoading","username","setUsername","phoneNumber","setPhoneNumber","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","validateInput","error","length","validateResponse","errored","response","tokens","performAPICall","fetch","concat","endpoint","method","headers","body","JSON","stringify","name","phone","json","e","register","success","push","createElement","Fragment","className","prefix","placeholder","value","onChange","target","Password","type","onClick"],"sources":["/Users/krunal/Desktop/Crio project/Fullstack/Flix-cart/Frontend/src/components/Register.js"],"sourcesContent":["import { LockOutlined, UserOutlined, MailOutlined } from \"@ant-design/icons\";\nimport { Button, Input, message } from \"antd\";\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { config } from \"../App\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\n\nconst Register = () => {\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\")\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  const validateInput = () => {\n    if (!username) {\n      message.error(\"Username is a required field\");\n      return false;\n    }\n    if (username.length < 6) {\n      message.error(\"Username must be at least 6 characters\");\n      return false;\n    }\n    if (username.length > 32) {\n      message.error(\"Username must be at most 32 characters\");\n      return false;\n    }\n    if (!password) {\n      message.error(\"Password is a required field\");\n      return false;\n    }\n    if (password.length < 6) {\n      message.error(\"Password must be at least 8 characters\");\n      return false;\n    }\n    if (password.length > 32) {\n      message.error(\"Password must be at most 32 characters\");\n      return false;\n    }\n    if (password !== confirmPassword) {\n      message.error(\"Passwords do not match\");\n      return false;\n    }\n    return true;\n  };\n\n  const validateResponse = (errored, response) => {\n    if (errored || (!response.tokens && !response.message)) {\n      message.error(\n        \"Something went wrong. Check that the backend is running, reachable and returns valid JSON.\"\n      );\n      return false;\n    }\n    if (!response.tokens) {\n      message.error(response.message);\n      return false;\n    }\n    return true;\n  };\n\n  const performAPICall = async () => {\n    let response = {};\n    let errored = false;\n    setLoading(true);\n    try {\n      response = await (\n        await fetch(`${config.endpoint}/auth/register`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            name: username,\n            phone: phoneNumber,\n            email,\n            password,\n          }),\n        })\n      ).json();\n    } catch (e) {\n      errored = true;\n    }\n    setLoading(false);\n    if (validateResponse(errored, response)) {\n      return response;\n    }\n  };\n\n  const register = async () => {\n    if (validateInput()) {\n      const response = await performAPICall();\n      if (response) {\n        setUsername(\"\");\n        setPassword(\"\");\n        setConfirmPassword(\"\");\n        message.success(\"Registered successfully\");\n        history.push(\"/login\");\n      }\n    }\n  };\n\n  return (\n    <>\n      {/* Display Header */}\n      <Header history={history} />\n\n      {/* Display Register fields */}\n      <div className=\"flex-container\">\n        <div className=\"register-container container\">\n          <h1>Make an account</h1>\n\n          {/* Antd component which renders a formatted <input type=\"text\"> field */}\n          <Input\n            className=\"input-field\"\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"Username\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n          <Input\n            className=\"input-field\"\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"Mobile Number\"\n            value={phoneNumber}\n            onChange={(e) => setPhoneNumber(e.target.value)}\n          />\n          <Input\n            className=\"input-field\"\n            prefix={<MailOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"Email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n\n          {/* Antd component which renders a formatted <input type=\"password\"> field */}\n          <Input.Password\n            className=\"input-field\"\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n\n          {/* Antd component which renders a formatted <input type=\"password\"> field */}\n          <Input.Password\n            className=\"input-field\"\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"Confirm Password\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n          />\n\n          {/* Antd component which renders a formatted <button type=\"button\"> field */}\n          <Button loading={loading} type=\"primary\" onClick={register}>\n            Register\n          </Button>\n        </div>\n      </div>\n\n      {/* Display the footer */}\n      <Footer />\n    </>\n  );\n};\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}